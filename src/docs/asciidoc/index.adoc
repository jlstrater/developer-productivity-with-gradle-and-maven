:example-caption!:
ifndef::imagesdir[:imagesdir: images]
ifndef::sourcedir[:sourcedir: ../java]
:status:
:title-slide-background-image: title.png
:title-slide-transition: zoom
:title-slide-transition-speed: fast
:icons: font
:revealjs_controls: true

= Maximizing Developer Productivity+++<br>+++with Gradle and Maven

Jenn Strater, Gradle
@codeJENNerator

== Who am I?

[source,groovy]
----
speaker {
    name = "Jennifer 'Jenn' Strater"
    currentHome = "Berlin, Germany"
    nationality = 'USA'
    company = "Gradle"
    title = "Developer Advocate"
    contributorTo = [
        "Spring REST Docs",
        "Codenarc",
        "Apache Groovy Community",
        "GR8DI"
    ]
    twitter = "@codeJENNerator"
    github = "jlstrater"
    web = uri("https://www.jennstrater.com")
}
----

== Gradle

[cols="2*^.<"]
|===
a| image::gradle-build-tool-dark-green-primary.svg[width=auto, height=86px]
a| image::gradle-enterprise-gradient-primary.svg[width=auto, height=100px]

.<| Build automation
.<| Development productivity +
(Gradle & Maven)
|===

== Why is Developer Productivity important?

[%step]
* Long developer cycles -> more time get to production
* Context switching
* Coffee breaks add up

== How are builds critical to Developer Productivity?

[%step]
* inefficient builds take longer to run
* when build take too long there can be context switching
* non-reproducable builds can cause problems at the least convenient times

[NOTE.speaker]
And many more!

=== Waiting

image::compiling.png[width=50%, height=auto]
One extra minute per build destroys 4% of engineering capacity, on average.

[NOTE.speaker]
source: gradle.com

=== Lost Time on Debugging

image::debugging.png[width=50%, height=auto]

=== Debugging Time
* On average, 20% of all builds fail because of code defects.
* Netflix has done internal studies that show that this consumes
20% of their engineering capacity.

[NOTE.speaker]
This is fine and is actually the job of the build. But it often takes way too long to find the cause for such a failure.
Easily 5-10% of engineering capacity are spend on this.

== How many builds are you running?

[NOTE.speaker]
Do you even know? Is it only CI data? What about your developer machines?
How long does it take? Is it minutes? Hours? What was it one month ago?

== Demo for Gradle Team

[NOTE.speaker]
144,335 for just July 2-9! And that's only a small team of 15-20 devs and one CI server.

=== Show me the data!

[.dark.background]
== Faster builds

image::subsection.png[background, size=cover]

=== How do we get faster?

[.line-through]
=== How do we get faster?

=== What is slow?

[%conceal]
=== Scan

image::scan.png[width=1024, height=auto]

[NOTE.speaker]
The first data point: get the speed of individual builds with free build scans. scans.gradle.com or --scan for gradle.

[%conceal]
=== performance

image::performance-dashboard.png[width=auto, height=auto]

[NOTE.speaker]
1 data point means nothing or even a few. Once all builds are being scanned, we can make inferences.

[%conceal]
=== trends

image::trends-dashboard.png[width=1920, height=auto]

== How do we get faster?

* More efficient use of resources
* Don't rebuild what hasn't changed
* Fail fast

[NOTE.speaker]
parallelization, using the daemon, etc.
build caching
tests especially, but also dependency conflicts, and other parts of the build.

== How do we get faster?

* **More efficient use of resources**
* Don't rebuild what hasn't changed
* Fail fast

=== Resource usage

image::jake-wharton-macbook-performance.png[width=75%, height=auto]

=== Settings & Suggestions

image::settings_and_suggestions.png[width=960, height=auto]

[NOTE.speaker]
Gradle only as of 2019.2

=== Switches

[cols="2*^.<"]
|===
a| image::switches_gradle.png[height=auto]
a| image::switches_maven.png[height=auto]

.<| Gradle
.<| Maven
|===

=== Resources

Gradle Performance Guide

link:https://guides.gradle.org/performance[https://guides.gradle.org/performance]

[NOTE.speaker]
including more advice like performance tuning the JVM settings.

Is there an equivalent for Maven?

== How do we get faster?

* More efficient use of resources
* **Don't rebuild what hasn't changed**
* Fail fast

=== Incremental Builds

link:https://blog.gradle.org/introducing-incremental-build-support[https://blog.gradle.org/introducing-incremental-build-support]

[NOTE.speaker]
built-in for Gradle; only in the GE extension for Maven
UP-TO-DATE checking is one example
results in more efficient compilation

[%notitle]
=== Maven vs. Gradle

image::maven-vs-gradle.png[height=auto]

=== Build Cache for Gradle

[%step]
[source,text]
----
$> gradle --build-cache assemble
:compileJava FROM-CACHE
:processResources
:classes
:jar
:assemble

BUILD SUCCESSFUL
----

=== Build Cache for Gradle

* By default in Java, Groovy, Scala, C++ und Swift
* Supports tasks such as Compile, Test und Verification

=== Local
* Local cache in Gradle built tool; Remote cache managed by Gradle Enterprise

=== Build Cache für Maven

* Eigene Extension (Teil von Gradle Enterprise)
* Initiales Release: März 2019
* Unterstützte Plugins: Java Compiler, Surefire/Failsafe, Javadoc, JAXB, Checkstyle

=== Build Cache – Demo

=== Wie funktioniert der Build Cache?

- Berechne _cacheKey_ eines Tasks/Goals basierend auf seinen Inputs: +
  _cacheKey(javaCompile)_ = _hash(sourceFiles, ...)_
- Speichere die Outputs unter _cacheEntry_: +
  _cacheEntry[cacheKey(javaCompile)]_ = _fileTree(classFiles)_

[.stretch.plain]
image::task_inputs_outputs.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-01.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-02.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-03.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-04.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-05.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-06.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-07.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-08.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-09.svg[]

[transition=none]
=== Lokaler und Remote Cache

[.stretch.plain]
image::caching-typical-scenario-10.svg[]

[.dark.background]
== Zuverlässige Builds

image::subsection.png[background, size=cover]

=== Anforderungen

* Daten um Verbesserungen/Verschlechterungen festzustellen
** Entwickler- und CI-Builds
** Zuverlässigkeit
** Geschwindigkeit

=== Was sind Build Scans?

* Aufzeichnung darüber, was in einem Build passiert ist
* Permanente und teilbare URLs
* Für Entwickler und Build Engineers

=== Gradle

[source,text]
----
$> gradle build --scan
...
BUILD SUCCESSFUL in 5s
143 actionable tasks: 29 executed, 76 from cache, 38 up-to-date

Publishing build scan...
https://gradle.com/s/wnftgsuyjleyi
----

=== Maven

(mit in `.mvn/extensions.xml` registrierter Extension)

[source,text]
----
$> mvn clean verify
...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.262 s
[INFO] Finished at: 2019-04-23T09:55:36+02:00
[INFO] ------------------------------------------------------------------------
[INFO] 13 goals, 8 executed, 5 from cache, saving at least 16s
[INFO]
[INFO] Publishing build scan...
[INFO] https://gradle.com/s/ypgljbvelzxzs
[INFO]
----

=== Build Scans – Demo

[NOTE.speaker]
--
* Navigate to summary, open performance tab, open timeline tab, open plugins view
* Show scan list
* Build categorization via Tags
--

=== Build Scans

* Unterstützen *Gradle _und_ Maven*
* *Öffentliche Scans kostenlos* auf link:https://scans.gradle.com[scans.gradle.com]
** https://gradle.com/s/wnftgsuyjleyi
* *Gradle Enterprise* bietet zusätzliche Features und Hosting auf eigenem Server
** Build Comparison
** Performance Dashboard
** Build Trends

== Build Comparison

[%conceal]
=== Scan list
image::scan-list.png[width=1920, height=auto]

=== Compare two builds

image::task-inputs-comparison.png[width=1920, height=auto]

=== Eigene Analysen

* *Export API* benutzen!
* https://github.com/gradle/build-analysis-demo

image::build-analysis-data-pipeline.png[width=100%, height=auto]

[NOTE.speaker]
--
* Gradle Enterprise wird einige Analysen bekommen
* Gradle Enterprise soll kein BI Tool werden - gute Einsichten out-of-the-box, der Rest via Export API möglich
--

[%notitle]
=== Dashboard

image::build-dashboard.png[height=auto]

[%notitle]
=== Dashboard

image::test-analytics.png[height=auto]

[NOTE.speaker]
--
Über Flaky Test reden.
--

=== Resources

* *Free Trainings* at https://gradle.com/training/[gradle.com/training]:
  - Build Cache Deep Dive
  - Maven + Gradle Enterprise
* *Gradle Build Tool:* https://gradle.org[]
* *Gradle Enterprise:* https://gradle.com[]
* *Gradle Newsletter:* https://newsletter.gradle.com

[.dark.background]
=== Questions?

image::subsection.png[background, size=cover]
image::thank-you.png[width=40%, height=auto]